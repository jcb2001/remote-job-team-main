(()=>{var t={46161:t=>{class e{static getAvatarUrl(t,a=96,r=404){return`https://secure.gravatar.com/avatar/${e.md5(t.toLowerCase().trim())}?size=${a}&default=${encodeURIComponent(r)}`}static md5(t){const e="0123456789abcdef";function a(t){let a="";for(let r=0;r<=3;r++)a+=e.charAt(t>>8*r+4&15)+e.charAt(t>>8*r&15);return a}function r(t,e){const a=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(a>>16)<<16|65535&a}function n(t,e,a,n,i,o){return r((s=r(r(e,t),r(n,o)))<<(l=i)|s>>>32-l,a);var s,l}function i(t,e,a,r,i,o,s){return n(e&a|~e&r,t,e,i,o,s)}function o(t,e,a,r,i,o,s){return n(e&r|a&~r,t,e,i,o,s)}function s(t,e,a,r,i,o,s){return n(e^a^r,t,e,i,o,s)}function l(t,e,a,r,i,o,s){return n(a^(e|~r),t,e,i,o,s)}const c=function(t){let e;const a=1+(t.length+8>>6),r=Array.from(16*a);for(e=0;e<16*a;e++)r[e]=0;for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<e%4*8;return r[e>>2]|=128<<e%4*8,r[16*a-2]=8*t.length,r}(t);let d,h,u,m,g,p=1732584193,v=-271733879,f=-1732584194,w=271733878;for(d=0;d<c.length;d+=16)h=p,u=v,m=f,g=w,p=i(p,v,f,w,c[d+0],7,-680876936),w=i(w,p,v,f,c[d+1],12,-389564586),f=i(f,w,p,v,c[d+2],17,606105819),v=i(v,f,w,p,c[d+3],22,-1044525330),p=i(p,v,f,w,c[d+4],7,-176418897),w=i(w,p,v,f,c[d+5],12,1200080426),f=i(f,w,p,v,c[d+6],17,-1473231341),v=i(v,f,w,p,c[d+7],22,-45705983),p=i(p,v,f,w,c[d+8],7,1770035416),w=i(w,p,v,f,c[d+9],12,-1958414417),f=i(f,w,p,v,c[d+10],17,-42063),v=i(v,f,w,p,c[d+11],22,-1990404162),p=i(p,v,f,w,c[d+12],7,1804603682),w=i(w,p,v,f,c[d+13],12,-40341101),f=i(f,w,p,v,c[d+14],17,-1502002290),v=i(v,f,w,p,c[d+15],22,1236535329),p=o(p,v,f,w,c[d+1],5,-165796510),w=o(w,p,v,f,c[d+6],9,-1069501632),f=o(f,w,p,v,c[d+11],14,643717713),v=o(v,f,w,p,c[d+0],20,-373897302),p=o(p,v,f,w,c[d+5],5,-701558691),w=o(w,p,v,f,c[d+10],9,38016083),f=o(f,w,p,v,c[d+15],14,-660478335),v=o(v,f,w,p,c[d+4],20,-405537848),p=o(p,v,f,w,c[d+9],5,568446438),w=o(w,p,v,f,c[d+14],9,-1019803690),f=o(f,w,p,v,c[d+3],14,-187363961),v=o(v,f,w,p,c[d+8],20,1163531501),p=o(p,v,f,w,c[d+13],5,-1444681467),w=o(w,p,v,f,c[d+2],9,-51403784),f=o(f,w,p,v,c[d+7],14,1735328473),v=o(v,f,w,p,c[d+12],20,-1926607734),p=s(p,v,f,w,c[d+5],4,-378558),w=s(w,p,v,f,c[d+8],11,-2022574463),f=s(f,w,p,v,c[d+11],16,1839030562),v=s(v,f,w,p,c[d+14],23,-35309556),p=s(p,v,f,w,c[d+1],4,-1530992060),w=s(w,p,v,f,c[d+4],11,1272893353),f=s(f,w,p,v,c[d+7],16,-155497632),v=s(v,f,w,p,c[d+10],23,-1094730640),p=s(p,v,f,w,c[d+13],4,681279174),w=s(w,p,v,f,c[d+0],11,-358537222),f=s(f,w,p,v,c[d+3],16,-722521979),v=s(v,f,w,p,c[d+6],23,76029189),p=s(p,v,f,w,c[d+9],4,-640364487),w=s(w,p,v,f,c[d+12],11,-421815835),f=s(f,w,p,v,c[d+15],16,530742520),v=s(v,f,w,p,c[d+2],23,-995338651),p=l(p,v,f,w,c[d+0],6,-198630844),w=l(w,p,v,f,c[d+7],10,1126891415),f=l(f,w,p,v,c[d+14],15,-1416354905),v=l(v,f,w,p,c[d+5],21,-57434055),p=l(p,v,f,w,c[d+12],6,1700485571),w=l(w,p,v,f,c[d+3],10,-1894986606),f=l(f,w,p,v,c[d+10],15,-1051523),v=l(v,f,w,p,c[d+1],21,-2054922799),p=l(p,v,f,w,c[d+8],6,1873313359),w=l(w,p,v,f,c[d+15],10,-30611744),f=l(f,w,p,v,c[d+6],15,-1560198380),v=l(v,f,w,p,c[d+13],21,1309151649),p=l(p,v,f,w,c[d+4],6,-145523070),w=l(w,p,v,f,c[d+11],10,-1120210379),f=l(f,w,p,v,c[d+2],15,718787259),v=l(v,f,w,p,c[d+9],21,-343485551),p=r(p,h),v=r(v,u),f=r(f,m),w=r(w,g);return a(p)+a(v)+a(f)+a(w)}}t.exports=e},66640:(t,e,a)=>{(e=>{class r{static isEditorPage(){return tve_frontend_options.is_editor_page}static isExternal(t){return r.getDomain(location.href)!==r.getDomain(t)}static getDomain(t){return t.replace("http://","").replace("https://","").split("/")[0]}static restAjax({type:t="POST",route:a="",data:r}){return e.ajax({headers:{"X-WP-Nonce":tve_frontend_options.nonce},url:a,type:t,data:r})}static handleContent(t,a=!0){e(window).trigger(a?"tcb_on_content_show":"tcb_on_content_hide"),e(window).trigger("tve_after_content_toggle",[t,a])}static jsonParse(t,e,a=null,r={}){if(null==a){let a;try{a=JSON.parse(t.attr(e)||JSON.stringify(r))}catch(e){console.warn("Could not get json data for element:",t),a=r}return a}return t.attr(e,JSON.stringify(a))}static toast(t,e,a){"string"!=typeof t&&(t=t.message||t.error||t.success),e||(e=!1),TCB_Front.notificationElement.toggle(t,e?"error":"success",a)}static windowWidth(){let t,e;try{e=window.parent&&window.parent.TVE&&window.parent.TVE.main,t=e&&window.parent.TVE.main.$frame.width()||TCB_Front.$window[0].innerWidth}catch(a){t=TCB_Front.$window[0].innerWidth,e=!1}let a=window.screen.width;return window.matchMedia("(orientation:landscape)").matches&&window.screen.height>a&&(a=window.screen.height),e||t>a+20&&t>window.outerWidth+20&&(t=a),t}static getBrowserScrollSize(){const t={border:"none",height:"200px",margin:"0",padding:"0",width:"200px"},a=e("<div>").css(e.extend({},t)),r=e("<div>").css(e.extend({left:"-1000px",overflow:"scroll",position:"absolute",top:"-1000px"},t)).append(a).appendTo("body").scrollLeft(1e3).scrollTop(1e3),n={height:r.offset().top-a.offset().top||0,width:r.offset().left-a.offset().left||0};return r.remove(),n}static hasAdminBar(){return e("#wpadminbar").length>0}static appendFormParamsToURL(t,a){return!Array.isArray(a)&&a.jquery&&(a=r.buildFormParams(a)),t+(t.split("?")[1]?"&":"?")+e.param(a)}static buildFormParams(t){let e=[];return t.find(".tve_lg_input_container input:not([name=user_consent]), .tve_lg_input_container textarea").not("input[type=hidden]").not("input[type=password]").each(((t,a)=>{const r=ThriveGlobal.$j(a).serializeArray();if(r[0]){a.dataset.name&&(r[0].name=a.dataset.name.replace(/\s/g,"_")),TCB_Front.reservedTerms.includes(r[0].name.toLowerCase())&&(r[0].name="tve_"+r[0].name);const t=e.findIndex((t=>t.name===r[0].name));t>=0?e[t].value=e[t].value+", "+r[0].value:e=e.concat(r)}})),e}static appendRandomParamToURL(t){return t+(t.split("?")[1]?"&":"?")+"_="+Math.floor(1e3*Math.random())}static isEmail(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}static addHttp(t){return!(t=t.trim())||0===t.indexOf("#")||/^mailto/.test(t)||/^tel/.test(t)||/^(?:f|ht)tps?\:\/\//.test(t)||(t="https://"+t),t}static unserialize(t){const e="undefined"!=typeof window?window:a.g,r=function(t){let e=t.length;for(let a=t.length-1;a>=0;a--){const r=t.charCodeAt(a);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&a--}return e-1},n=function(t,a,r,n){throw new e[t](a,r,n)},i=function(t,e,a){const r=[];let i=2,o=t.slice(e,e+1);for(;o!==a;)i+e>t.length&&n("Error","Invalid"),r.push(o),o=t.slice(e+(i-1),e+i),i+=1;return[r.length,r.join("")]};return function t(e,a){let o,s,l,c,d,h,u,m,g,p,v,f,w,C,b,$,_,A=0,k=function(t){return t};const y=e.slice(a,a+1).toLowerCase();switch(a||(a=0),o=a+2,y){case"i":k=function(t){return parseInt(t,10)},m=i(e,o,";"),A=m[0],u=m[1],o+=A+1;break;case"b":k=function(t){return 0!==parseInt(t,10)},m=i(e,o,";"),A=m[0],u=m[1],o+=A+1;break;case"d":k=function(t){return parseFloat(t)},m=i(e,o,";"),A=m[0],u=m[1],o+=A+1;break;case"n":u=null;break;case"s":g=i(e,o,":"),A=g[0],p=g[1],o+=A+2,m=function(t,e,a){const n=[];let i,o;for(i=0;i<a;i++)o=t.slice(e+(i-1),e+i),n.push(o),a-=r(o);return[n.length,n.join("")]}(e,o+1,parseInt(p,10)),A=m[0],u=m[1],o+=A+2,A!==parseInt(p,10)&&A!==u.length&&n("SyntaxError","String length mismatch");break;case"a":for(u={},s=i(e,o,":"),A=s[0],l=s[1],o+=A+2,d=parseInt(l,10),c=!0,v=0;v<d;v++)w=t(e,o),C=w[1],f=w[2],o+=C,b=t(e,o),$=b[1],_=b[2],o+=$,f!==v&&(c=!1),u[f]=_;if(c){for(h=new Array(d),v=0;v<d;v++)h[v]=u[v];u=h}o+=1;break;default:n("SyntaxError","Unknown / Unhandled data type(s): "+y)}return[y,o-a,k(u)]}(t+"",0)[2]}static validateImageUrl(t){return!!t.match(/.*\.(gif|jpe?g|bmp|png)$/gim)}static getQueryStrings(){return window.location.search.replace("?","").split("&").reduce(((t,e)=>{const a=e.split("=");return t[a[0]]=a[1],t}),{})}static parseJwt(t){const[,e=""]=t.split("."),a=e.replace(/-/g,"+").replace(/_/g,"/");let r;try{r=JSON.parse(decodeURIComponent(window.atob(a).split("").map((t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(t){r={}}return r}static insertHeadScripts(t,e,a){const r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.async=!0,"function"==typeof a&&(n.onload=n.onreadystatechange=a),void 0!==e&&(n.id=e),n.src=t,r.insertBefore(n,r.firstChild)}static insertStylesheet(t,e){const a=document.getElementsByTagName("head")[0],r=document.createElement("link");r.rel="stylesheet",r.id=e,r.type="text/css",r.href=t,a.insertBefore(r,a.firstChild)}static hasResource(t,e){return null!==document.getElementById(t)||null!==document.querySelector(`[src="${e}"],[href="${e}"]`)}static getAttr(t){const a={};return e.each(t[0].attributes,(function(t,e){a[e.name]=e.value})),a}}t.exports=r,window.TCB_Front.toast=r.toast,window.tve_is_email=r.isEmail})(ThriveGlobal.$j)}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,a),i.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),void 0===TCB_Front.js_modules["avatar-picker"]&&TCB_Front.setModuleLoadedStatus("avatar-picker",!1),(t=>{if(TCB_Front.isModuleLoaded("avatar-picker"))return;const e=a(66640);TCB_Front.Hooks.addAction("tcb-modal.loaded",((e,a,n)=>{"avatar-picker"!==e||TCB_Front.Utils.isEditorPage()||r.instance(a,t(n.closest(".tve-avatar-picker-element"))).init()})),TCB_Front.setModuleLoadedStatus("avatar-picker",!0);class r{tempEmail="";constructor(t,e){this.modalInstance=t,this.$modal=this.modalInstance.$element,this.$element=e,this.$avatarElement=this.$element.find(".tve-avatar-picker-image"),this.defaultAvatar=this.$element.attr("data-default-avatar"),this.avatar=null,this.$avatarPreview=this.$modal.find(".tve-avatar-image-preview"),this.registerCallbacks()}static get avatarSize(){return 1024}static get connections(){return["google","facebook","gravatar","custom"]}static instance(t,e){return new r(t,e)}registerCallbacks(){this.modalInstance.registerCallback("save",(()=>{this.avatar&&(this.$avatarElement.css("background-image",`url(${this.avatar})`),this.$avatarElement.find("input").val(this.avatar),this.$avatarElement.data("has-temp-image",!1)),this.modalInstance.constructor.close()})),this.modalInstance.registerCallback("before-open",(()=>{this.$avatarPreview.css("background-image",this.$avatarElement.css("background-image")),this.$modal.find(".tve-avatar-extra-options input").val(""),this.$modal.find('[data-selected="true"]').removeAttr("data-selected")})),this.modalInstance.registerCallback("after-open",(()=>{setTimeout((()=>{this.hasConnection("google")&&this.$modal.css("--tve-connection-type-width",this.$modal.find(".tve-google-sign-in iframe").outerWidth()-20+"px")}),420)})),this.modalInstance.registerCallback("optionSelected",((t,e)=>{this.closeExtraOptions(),e.dataset.selected=!0}))}hasConnection(t){let e="1"===this.$element.attr(`data-${t}`);if(e)switch(t){case"google":e=TCB_Front.googleApi.isConnected();break;case"facebook":e=TCB_Front.facebookApi.isConnected()}return e}closeExtraOptions(){this.$modal.find('[data-selected="true"]').removeAttr("data-selected")}init(){if(r.connections.every((t=>!this.hasConnection(t)))&&this.$element.attr("data-gravatar","1"),this.modalInstance.registerCallback("resetImage",(()=>{this.setAvatar(this.defaultAvatar)})),this.hasConnection("gravatar")){const t=this.$element.closest("form").find('input[type="email"]');this.modalInstance.registerCallback("applyGravatar",(()=>{this.tempEmail=this.$modal.find(".tve-avatar-gravatar-email").val();const t=a(46161).getAvatarUrl(this.tempEmail,r.avatarSize);this.setAvatarFromUrl(t)})),this.modalInstance.registerCallback("after-open",(()=>{const e=this.tempEmail||t.val();this.$modal.find(".tve-avatar-gravatar-email").val(e)})),t.on("change",(t=>{if(this.$avatarElement.css("background-image").includes(this.defaultAvatar)||this.$avatarElement.data("has-temp-image")){const e=a(46161).getAvatarUrl(t.target.value,r.avatarSize);fetch(e).then((t=>t.blob())).then((t=>{"text/html"!==t.type&&(this.setAvatarFromUrl(e,this.$avatarElement),this.$avatarElement.find("input").val(e),this.$avatarElement.data("has-temp-image",!0))})).catch((()=>{}))}}))}this.hasConnection("custom")&&this.modalInstance.registerCallback("applyCustomUrl",(()=>{const t=this.$modal.find(".tve-avatar-custom-url-input").val();e.validateImageUrl(t)?this.setAvatarFromUrl(t):this.onError("Invalid image url.")})),this.hasConnection("google")&&(TCB_Front.googleApi.init(),TCB_Front.googleApi.initButton(this.$modal.find(".tve-google-sign-in")[0]),TCB_Front.googleApi.registerCallback("auth",(()=>{this.modalInstance.isOpen()&&this.setAvatarFromUrl(TCB_Front.googleApi.getAvatar(r.avatarSize))}))),this.hasConnection("facebook")&&(this.modalInstance.registerCallback("onFacebookLoginClick",(()=>TCB_Front.facebookApi.login())),TCB_Front.facebookApi.registerCallback("auth",(()=>{TCB_Front.facebookApi.getProfilePicture(r.avatarSize).then((t=>this.setAvatar(t)))}))),r.connections.forEach((t=>{this.$modal.find(`[data-connection="${t}"]`).toggle(this.hasConnection(t))})),this.$avatarElement.find("input").val(this.defaultAvatar)}setAvatarFromUrl(t,e=this.$avatarPreview){t.trim()?(this.toggleLoading(),fetch(t).then((a=>{a.ok&&a.headers.get("content-type").includes("image")||(t=this.defaultAvatar),this.setAvatar(t,e),this.closeExtraOptions()}),(()=>{this.onError("Unfortunately we could not fetch that image, please use another.")}))):this.onError("Invalid image url.")}setAvatar(e=null,a=this.$avatarPreview){this.toggleLoading(),e||(e=this.defaultAvatar),t(`<img referrerpolicy="no-referrer" src="${e}">`).on("load",(()=>{this.toggleLoading(!1)})),a.css("background-image",`url(${e})`),this.avatar=e}toggleLoading(t=!0){this.$avatarPreview.toggleClass("tve-loader-square",t)}onError(t){this.setAvatar(),this.closeExtraOptions(),e.toast(t,!0)}}})(ThriveGlobal.$j)})();